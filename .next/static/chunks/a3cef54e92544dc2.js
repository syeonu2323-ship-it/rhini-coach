(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function l(){let[e,l]=(0,t.useState)("log");return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-sky-50 to-white text-zinc-900",children:[(0,s.jsx)("header",{className:"sticky top-0 bg-white/80 backdrop-blur border-b",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"font-bold",children:"RhiniCoach MVP"}),(0,s.jsx)("nav",{className:"flex gap-2",children:[["log","로그"],["report","리포트"],["advice","약 추천"],["settings","설정"]].map(([t,i])=>(0,s.jsx)("button",{onClick:()=>l(t),className:`px-3 py-1.5 rounded-xl text-sm ${e===t?"bg-zinc-900 text-white":"bg-zinc-100"}`,children:i},t))})]})}),(0,s.jsxs)("main",{className:"max-w-5xl mx-auto px-4 py-6 grid gap-6",children:["log"===e&&(0,s.jsx)(n,{}),"report"===e&&(0,s.jsx)(c,{}),"advice"===e&&(0,s.jsx)(r,{}),"settings"===e&&(0,s.jsx)(d,{})]}),(0,s.jsx)("footer",{className:"py-8 text-center text-xs text-zinc-500",children:"Prototype · Wellness reference · Not medical advice"})]})}function i({children:e}){return(0,s.jsx)("div",{className:"rounded-2xl border p-4 bg-white",children:e})}function a(){return{ts:new Date().toISOString(),sneeze:0,rhinorrhea:0,congestion:0,itchyEyes:0,eyeRedness:0,throatItch:0,cough:0,postNasalDrip:0,headache:0,fatigue:0,sleepQuality:0,meds:{antihist:!1,incs:!1,leukotriene:!1},triggers:{dust:!1,pet:!1,pollen:!1,coldAir:!1},note:""}}function n(){let[e,l]=(0,t.useState)([]),[n,c]=(0,t.useState)(a());return(0,t.useEffect)(()=>{let e=localStorage.getItem("rc_symptoms");if(e)try{l(JSON.parse(e))}catch{}},[]),(0,s.jsxs)(i,{children:[(0,s.jsx)("div",{className:"font-semibold mb-2",children:"증상 일지"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"text-sm space-y-4",children:[(0,s.jsx)("div",{className:"grid gap-3",children:[{key:"sneeze",label:"재채기"},{key:"rhinorrhea",label:"콧물"},{key:"congestion",label:"코막힘"},{key:"itchyEyes",label:"눈 가려움"},{key:"eyeRedness",label:"눈 충혈"},{key:"throatItch",label:"목 가려움/이물감"},{key:"cough",label:"기침"},{key:"postNasalDrip",label:"후비루(목뒤로 넘어감)"},{key:"headache",label:"두통/안면압"},{key:"fatigue",label:"피로"},{key:"sleepQuality",label:"수면의 질(높을수록 나쁨)"}].map(({key:e,label:t})=>(0,s.jsxs)("label",{className:"block",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)("span",{className:"text-xs text-zinc-500",children:n[e]})]}),(0,s.jsx)("input",{type:"range",min:0,max:3,step:1,value:n[e]??0,onChange:s=>{var t;return t=+s.target.value,void c(s=>({...s,[e]:t}))},className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-[11px] text-zinc-500",children:[(0,s.jsx)("span",{children:"0"}),(0,s.jsx)("span",{children:"1"}),(0,s.jsx)("span",{children:"2"}),(0,s.jsx)("span",{children:"3"})]})]},String(e)))}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"복용 약"}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.meds.antihist,onChange:e=>c({...n,meds:{...n.meds,antihist:e.target.checked}})})," 항히스타민"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.meds.incs,onChange:e=>c({...n,meds:{...n.meds,incs:e.target.checked}})})," 비강 스테로이드(INCS)"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.meds.leukotriene,onChange:e=>c({...n,meds:{...n.meds,leukotriene:e.target.checked}})})," 류코트리엔 억제제"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"트리거"}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.triggers.dust,onChange:e=>c({...n,triggers:{...n.triggers,dust:e.target.checked}})})," 집먼지/진드기"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.triggers.pet,onChange:e=>c({...n,triggers:{...n.triggers,pet:e.target.checked}})})," 반려동물"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.triggers.pollen,onChange:e=>c({...n,triggers:{...n.triggers,pollen:e.target.checked}})})," 꽃가루"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.triggers.coldAir,onChange:e=>c({...n,triggers:{...n.triggers,coldAir:e.target.checked}})})," 찬 공기/기온변화"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"메모"}),(0,s.jsx)("textarea",{className:"w-full px-3 py-2 rounded-lg bg-zinc-100",rows:3,value:n.note??"",onChange:e=>c({...n,note:e.target.value}),placeholder:"특이사항을 적어주세요(운동, 외출, 음식, 노출 등)"})]}),(0,s.jsx)("button",{onClick:function(){let s=[...e,n];localStorage.setItem("rc_symptoms",JSON.stringify(s)),l(s),c(a())},className:"px-4 py-2 rounded-xl bg-zinc-900 text-white",children:"기록 추가"})]}),(0,s.jsxs)("div",{className:"space-y-3 max-h-[70vh] overflow-auto pr-2",children:[e.slice().reverse().map((e,t)=>(0,s.jsxs)("div",{className:"rounded-xl border p-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:new Date(e.ts).toLocaleString()}),(0,s.jsxs)("div",{className:"text-xs",children:[e.meds?.antihist?"AH ":"",e.meds?.incs?"INCS ":"",e.meds?.leukotriene?"LTRA":""]})]}),(0,s.jsxs)("div",{className:"mt-1 text-[13px] text-zinc-800",children:["재채기",e.sneeze," · 콧물",e.rhinorrhea," · 코막힘",e.congestion," · 눈가려움",e.itchyEyes," · 기침",e.cough]}),e.note&&(0,s.jsxs)("div",{className:"mt-1 text-[12px] text-zinc-600 line-clamp-2",children:["메모: ",e.note]})]},t)),0===e.length&&(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:"아직 기록이 없습니다."})]})]})]})}function c(){let[e,l]=(0,t.useState)("37.5665"),[a,n]=(0,t.useState)("126.9780"),[c,r]=(0,t.useState)(!1),[d,o]=(0,t.useState)(null),[x,h]=(0,t.useState)(null),[m,g]=(0,t.useState)(null);async function p(s){r(!0);try{let t=await fetch(`/api/rhinitis?lat=${e}&lon=${a}&dayOffset=${s}`).then(e=>e.json());0===s&&o(t),1===s&&h(t),2===s&&g(t)}finally{r(!1)}}return(0,s.jsxs)(i,{children:[(0,s.jsx)("div",{className:"font-semibold mb-2",children:"비염 위험 리포트"}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-3 gap-2 text-sm mb-3",children:[(0,s.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:e,onChange:e=>l(e.target.value),placeholder:"위도 (lat)"}),(0,s.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:a,onChange:e=>n(e.target.value),placeholder:"경도 (lon)"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>p(0),className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:c?"계산 중...":"오늘"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(1),className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:"내일"}),(0,s.jsx)("button",{type:"button",onClick:()=>p(2),className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:"모레"})]})]}),[["오늘",d],["내일",x],["모레",m]].map(([e,t])=>(0,s.jsxs)("div",{className:"mt-4 text-sm",children:[(0,s.jsx)("div",{className:"font-semibold",children:e}),t?(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsxs)("div",{children:["예측: ",(0,s.jsx)("b",{children:t.risk.level})," (점수 ",t.risk.score,"/5)"]}),(0,s.jsx)("ul",{className:"list-disc pl-5 mt-1",children:t.risk.tips.map(e=>(0,s.jsx)("li",{children:e},e))})]}):(0,s.jsx)("div",{className:"text-zinc-500",children:"아직 계산 전이에요."})]},e))]})}function r(){let[e,l]=(0,t.useState)(null),[a,n]=(0,t.useState)("37.5665"),[c,r]=(0,t.useState)("126.9780"),[d,o]=(0,t.useState)(0),[x,h]=(0,t.useState)(null),[m,g]=(0,t.useState)([]);async function p(){let e=await fetch(`/api/rhinitis?lat=${a}&lon=${c}&dayOffset=${d}`).then(e=>e.json());h({score:Number(e?.risk?.score??0),level:String(e?.risk?.level??"낮음")})}(0,t.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("rc_symptoms")||"[]");if(Array.isArray(e)&&e.length>0){let s=e[e.length-1];l(s)}}catch{}},[]);let u=`https://www.google.com/maps/search/%EC%95%BD%EA%B5%AD/@${a},${c},15z`,j=`https://www.google.com/maps/search/%EC%9D%B4%EB%B9%84%EC%9D%B8%ED%9B%84%EA%B3%BC/@${a},${c},15z`,b=`https://map.naver.com/v5/search/%EC%95%BD%EA%B5%AD?c=${c},${a},15,0,0,0,dh`,N=`https://map.naver.com/v5/search/%EC%9D%B4%EB%B9%84%EC%9D%B8%ED%9B%84%EA%B3%BC?c=${c},${a},15,0,0,0,dh`;return(0,s.jsxs)(i,{children:[(0,s.jsx)("div",{className:"font-semibold mb-2",children:"약 추천 (증상 + 날씨 위험도)"}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-3 gap-2 text-sm mb-3",children:[(0,s.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:a,onChange:e=>n(e.target.value),placeholder:"위도(lat)"}),(0,s.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:c,onChange:e=>r(e.target.value),placeholder:"경도(lon)"}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)("select",{value:d,onChange:e=>o(Number(e.target.value)),className:"px-3 py-2 rounded-lg bg-zinc-100",children:[(0,s.jsx)("option",{value:0,children:"오늘"}),(0,s.jsx)("option",{value:1,children:"내일"})]}),(0,s.jsx)("button",{onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{n(String(e.coords.latitude)),r(String(e.coords.longitude))},()=>alert("위치 권한을 허용해주세요.")):alert("브라우저가 위치를 지원하지 않습니다.")},className:"px-3 py-2 rounded-lg bg-zinc-200",children:"내 위치"}),(0,s.jsx)("button",{onClick:p,className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:"날씨 위험 불러오기"})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 mb-3 text-sm",children:[(0,s.jsxs)("div",{className:"rounded-xl bg-zinc-50 border p-3",children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"최근 증상 기록"}),e?(0,s.jsxs)("div",{className:"mt-1 text-zinc-700",children:["시각: ",new Date(e.ts).toLocaleString(),(0,s.jsx)("br",{}),"재채기 ",e.sneeze," · 콧물 ",e.rhinorrhea," · 코막힘 ",e.congestion," · 눈가려움 ",e.itchyEyes]}):(0,s.jsx)("div",{className:"text-zinc-500",children:"없음 (로그 탭에서 추가)"})]}),(0,s.jsxs)("div",{className:"rounded-xl bg-zinc-50 border p-3",children:[(0,s.jsxs)("div",{className:"text-xs text-zinc-500",children:[0===d?"오늘":"내일"," 날씨 위험"]}),x?(0,s.jsxs)("div",{className:"mt-1 text-zinc-700",children:["레벨: ",(0,s.jsx)("b",{children:x.level})," · 점수 ",x.score,"/5"]}):(0,s.jsx)("div",{className:"text-zinc-500",children:"“날씨 위험 불러오기”를 눌러주세요"})]})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("button",{onClick:function(){var s,t,l;let i,a,n,c,r,d,o,h,m;e?g((s=e,t=x?.score??null,l=x?.level,a=5/3*(((i=e=>"number"==typeof e?e:0)(s.rhinorrhea)+i(s.congestion)+i(s.sneeze))/3),n=5/3*((i(s.itchyEyes)+i(s.eyeRedness))/2),c=5/3*((i(s.cough)+i(s.postNasalDrip))/2),d=Number((.5*a+.2*n+.2*c+.1*(r=5/3*i(s.sleepQuality))).toFixed(2)),o=t??0,h=[],d>=3.5&&o>=3.5?h.push({title:"강력 조합: INCS + 항히스타민",detail:"- 코막힘/콧물/재채기 모두 강함 → INCS 매일 사용 + 2세대 항히스타민 병용 고려\n- 외출 시 마스크 · 귀가 후 샤워/코세척\n- 1~2주 지속/악화 시 진료 권고"}):d>=3&&o>=2.5&&h.push({title:"중등도 조합: INCS 중심",detail:"- 코막힘 비중↑ → INCS 우선, 재채기·콧물 동반 시 AH 추가\n- 취침 전 세척/가습 보조"}),d>=3&&o<2&&h.push({title:"증상은 높은데 날씨 위험 낮음",detail:"- 실내 트리거(집먼지/반려동물)·감염성 증상(발열/농성분비/얼굴통증) 점검\n- 세척 + 필요시 AH/INCS 단기 사용\n- 악화/지속 시 진료"}),d<1.5&&o>=3&&h.push({title:"예방: 위험 높은 날 대비",detail:"- 외출 전 마스크 · 귀가 후 세안/코세척\n- 이전에 계절성 악화 경험 있으면 AH PRN 또는 낮은 강도 INCS 고려"}),n>=2.5&&h.push({title:"눈 증상 대책",detail:"- 점안 항히스타민/복합제 + 인공눈물 세척\n- 콘택트렌즈 사용 시 위생 주의"}),c>=2.5&&h.push({title:"후비루/기침 관리",detail:"- 생리식염수 세척, 수분섭취, 취침 시 상체/베개 높이기\n- 지속 시 의료진 상담"}),r>=2.5&&h.push({title:"수면 방해 개선",detail:"- 야간 악화면 저녁 INCS 또는 졸림 적은 2세대 AH 고려"}),(a>=3||c>=2.5)&&h.push({title:"LTRA(류코트리엔 억제제) 고려",detail:"- 천식/천명/운동유발 증상 동반 시 의료진과 상의"}),(m=s?.triggers||{}).pollen&&h.push({title:"꽃가루 회피",detail:"- 외출 시 마스크/안경 · 귀가 후 샤워/세탁 · 환기 타이밍 조절"}),m.dust&&h.push({title:"집먼지/진드기",detail:"- 침구 커버 · 주 1회 60℃ 세탁 · 진공청소/물걸레"}),m.pet&&h.push({title:"반려동물",detail:"- 침실 출입 제한 · HEPA 공기청정기"}),m.coldAir&&h.push({title:"찬 공기",detail:"- 마스크/스카프 사용으로 비강 보온"}),h.push({title:"주의/경고",detail:"- 본 앱은 정보 제공용입니다(진단·치료 대체 아님)\n- 고열·농성분비·안면통 지속·후각소실/심한 천명은 즉시 진료 권고"}),1===h.length&&h.unshift({title:"증상 경미",detail:"- 생활요법(세척/환기/샤워) 우선 · 필요 시 AH PRN"}),h)):alert("먼저 '로그' 탭에서 증상 기록을 1개 이상 추가해 주세요.")},className:"px-4 py-2 rounded-xl bg-emerald-600 text-white",children:"추천 생성"})}),m.length>0?(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-3",children:m.map((e,t)=>(0,s.jsxs)("div",{className:"rounded-xl border p-3 text-sm",children:[(0,s.jsx)("div",{className:"font-medium",children:e.title}),(0,s.jsx)("div",{className:"text-[13px] text-zinc-700 mt-1 whitespace-pre-wrap",children:e.detail})]},t))}):(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:"추천이 아직 없습니다. 상단에서 날씨 위험을 불러오고 “추천 생성”을 눌러주세요."}),(0,s.jsxs)("div",{className:"mt-4 grid sm:grid-cols-2 gap-2",children:[(0,s.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-blue-600 text-white text-center",children:"근처 약국 (Google)"}),(0,s.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-green-600 text-white text-center",children:"근처 약국 (Naver)"}),(0,s.jsx)("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-indigo-600 text-white text-center",children:"이비인후과 (Google)"}),(0,s.jsx)("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-teal-600 text-white text-center",children:"이비인후과 (Naver)"})]}),(0,s.jsx)("div",{className:"text-xs text-zinc-500 mt-3",children:"* 본 정보는 일반적인 웰니스 가이드이며, 진단·치료를 대체하지 않습니다. 심한 증상·호흡곤란·안면통 지속·고열 등은 즉시 의료진과 상담하세요."})]})}function d(){return(0,s.jsxs)(i,{children:[(0,s.jsx)("div",{className:"font-semibold mb-2",children:"설정"}),(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"추가 옵션을 여기에 계속 붙이면 됩니다."})]})}e.s(["default",()=>l])}]);