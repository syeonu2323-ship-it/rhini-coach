{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///Users/yeo_nu/rhini-coach/components/LfaAnalyzer.tsx"],"sourcesContent":["// ‚úÖ LFA QuickCheck v4.1 ‚Äî Low contrast & glare robust version\n\nconst PRESETS = {\n  sensitive:    { CONTROL_MIN: 1.20, TEST_MIN_ABS: 0.95, TEST_MIN_REL: 0.30, MAX_WIDTH_FRAC: 0.14, MIN_SEP_FRAC: 0.05, MAX_SEP_FRAC: 0.75, MIN_AREA_FRAC: 0.16 },\n  balanced:     { CONTROL_MIN: 1.45, TEST_MIN_ABS: 1.10, TEST_MIN_REL: 0.40, MAX_WIDTH_FRAC: 0.11, MIN_SEP_FRAC: 0.06, MAX_SEP_FRAC: 0.65, MIN_AREA_FRAC: 0.25 },\n  conservative: { CONTROL_MIN: 1.70, TEST_MIN_ABS: 1.35, TEST_MIN_REL: 0.55, MAX_WIDTH_FRAC: 0.09, MIN_SEP_FRAC: 0.07, MAX_SEP_FRAC: 0.58, MIN_AREA_FRAC: 0.35 },\n};\n\n// ü©µ Í∏ÄÎ†àÏñ¥ / Í∑∏Î¶ºÏûê ÎßàÏä§ÌÅ¨ ÏôÑÌôî\nfunction findWindowRect(c) {\n  const ctx = c.getContext(\"2d\");\n  const { width: w, height: h } = c;\n  const data = ctx.getImageData(0, 0, w, h).data;\n\n  const br = new Float32Array(w * h);\n  const sat = new Float32Array(w * h);\n  for (let y = 0; y < h; y++) {\n    for (let x = 0; x < w; x++) {\n      const i = (y * w + x) * 4,\n        R = data[i],\n        G = data[i + 1],\n        B = data[i + 2];\n      const max = Math.max(R, G, B),\n        min = Math.min(R, G, B);\n      br[y * w + x] = 0.2126 * R + 0.7152 * G + 0.0722 * B;\n      sat[y * w + x] = max === 0 ? 0 : (max - min) / max;\n    }\n  }\n\n  const brHi = quantile(Array.from(br), 0.96),\n    brLo = quantile(Array.from(br), 0.06);\n  const glareMask = new Uint8Array(w * h);\n  for (let i = 0; i < w * h; i++) {\n    if (br[i] > brHi && sat[i] < 0.12) glareMask[i] = 1;\n    if (br[i] < brLo * 0.6) glareMask[i] = 1;\n  }\n\n  return { glareMask };\n}\n\n// üßÆ Ï†ÄÎåÄÎπÑÏóêÏÑú z-score ÏïàÏ†ïÌôî (IQR Ï†ïÍ∑úÌôî)\nfunction peaksFromProfile(arr, axisLength) {\n  const bg = movingAverage(arr, Math.max(11, Math.floor(arr.length / 12)));\n  const detr = arr.map((v, i) => bg[i] - v);\n  const mean = detr.reduce((a, b) => a + b, 0) / Math.max(1, detr.length);\n  const q25 = quantile(detr, 0.25),\n    q75 = quantile(detr, 0.75);\n  const iqr = Math.max(1e-6, q75 - q25);\n  const sigma = iqr / 1.349;\n  const z = detr.map((v) => (v - mean) / (sigma || 1));\n\n  const edgeMargin = Math.max(4, Math.floor(arr.length * 0.04));\n  const peaks = [];\n  for (let i = 1; i < z.length - 1; i++) {\n    if (z[i] >= z[i - 1] && z[i] > z[i + 1]) {\n      if (i < edgeMargin || z.length - 1 - i < edgeMargin) continue;\n      const half = z[i] * 0.5;\n      let L = i,\n        R = i,\n        area = z[i];\n      while (L > 0 && z[L] > half) {\n        L--;\n        area += z[L];\n      }\n      while (R < z.length - 1 && z[R] > half) {\n        R++;\n        area += z[R];\n      }\n      peaks.push({ idx: i, z: z[i], width: R - L, area });\n    }\n  }\n  peaks.sort((a, b) => b.z - a.z);\n  const quality = (peaks[0]?.z || 0) + 0.8 * (peaks[1]?.z || 0);\n  return { z, peaks, quality };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/yeo_nu/rhini-coach/app/analyze/page.tsx"],"sourcesContent":["import React from \"react\";\nimport LfaAnalyzer from \"@/components/LfaAnalyzer\";\n\nexport default function Page() {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <LfaAnalyzer />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,qIAAW;;;;;;;;;;AAGlB","debugId":null}}]
}