{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/yeo_nu/rhini-coach/components/LfaAnalyzer.tsx"],"sourcesContent":["\"use client\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\n/** LFA QuickCheck v4.5.1\n * - Fix: 'the const' ì˜¤íƒ€ ì œê±°, items-center íƒ€ì´í¬ ìˆ˜ì •\n * - Fix: overlay ìº”ë²„ìŠ¤ pointer-events í™œì„±í™”(ìˆ˜ë™ í´ë¦­ ì¸ì‹)\n * - ê¸°ëŠ¥: (ì–‘ì„±) ì¦ìƒ ê¸°ë¡Â·ì•½ ì¶”ì²œÂ·ê·¼ì²˜ ë³‘ì›/ì•½êµ­, (ìŒì„±) ê°€ì´ë“œ + ë¼ì´íŠ¸ ê¸°ë¡ í† ê¸€\n */\n\ntype Verdict = \"Positive\" | \"Negative\" | \"Invalid\";\ntype Sensitivity = \"sensitive\" | \"balanced\" | \"conservative\";\ntype ControlPos = \"auto\" | \"left\" | \"right\" | \"top\" | \"bottom\";\ntype Mode = \"auto\" | \"manual\";\ntype Peak = { idx: number; z: number; width: number; area: number };\n\ntype SymptomEntry = {\n  ts: string;\n  sneezing: number;\n  rhinorrhea: number;\n  congestion: number;\n  itchyEyes: number;\n  cough: number;\n  fever: number;\n  note: string;\n  medsTaken: string[];\n};\n\ntype NearbyLinks = {\n  lat: number | null;\n  lng: number | null;\n  googleHospital?: string;\n  googlePharmacy?: string;\n  naverHospital?: string;\n  naverPharmacy?: string;\n};\n\ntype Rec = { key: string; label: string; score: number; reason: string; caution?: string };\n\nconst PRESETS: Record<Sensitivity, {\n  CONTROL_MIN: number; TEST_MIN_ABS: number; TEST_MIN_REL: number;\n  MAX_WIDTH_FRAC: number; MIN_SEP_FRAC: number; MAX_SEP_FRAC: number; MIN_AREA_FRAC: number;\n}> = {\n  sensitive:    { CONTROL_MIN: 1.20, TEST_MIN_ABS: 0.95, TEST_MIN_REL: 0.30, MAX_WIDTH_FRAC: 0.16, MIN_SEP_FRAC: 0.04, MAX_SEP_FRAC: 0.80, MIN_AREA_FRAC: 0.14 },\n  balanced:     { CONTROL_MIN: 1.45, TEST_MIN_ABS: 1.10, TEST_MIN_REL: 0.40, MAX_WIDTH_FRAC: 0.12, MIN_SEP_FRAC: 0.05, MAX_SEP_FRAC: 0.70, MIN_AREA_FRAC: 0.24 },\n  conservative: { CONTROL_MIN: 1.70, TEST_MIN_ABS: 1.35, TEST_MIN_REL: 0.55, MAX_WIDTH_FRAC: 0.10, MIN_SEP_FRAC: 0.06, MAX_SEP_FRAC: 0.60, MIN_AREA_FRAC: 0.34 },\n};\n\n// ê³µí†µ ìœ í‹¸\nconst clamp = (n:number,min:number,max:number)=>Math.max(min,Math.min(max,n));\nconst movingAverage = (a:number[], w:number)=>{const h=Math.floor(w/2), o=new Array(a.length).fill(0); for(let i=0;i<a.length;i++){let s=0,c=0; for(let j=i-h;j<=i+h;j++) if(j>=0&&j<a.length){s+=a[j];c++;} o[i]=c?s/c:0;} return o;};\nconst quantile = (arr:number[]|Float32Array, q:number)=>{const s=Array.from(arr).filter(Number.isFinite).slice().sort((x,y)=>x-y); if(!s.length) return 0; return s[Math.floor((s.length-1)*q)];};\n\n// íšŒì „/ì—ì§€\nfunction drawRotated(img:HTMLImageElement, deg:number) {\n  const rad = (deg*Math.PI)/180;\n  const srcW = img.naturalWidth || img.width, srcH = img.naturalHeight || img.height;\n  const scale = Math.min(1, 900/Math.max(srcW, srcH));\n  const base = document.createElement(\"canvas\"); const bctx = base.getContext(\"2d\")!;\n  base.width = Math.round(srcW*scale); base.height = Math.round(srcH*scale);\n  bctx.drawImage(img, 0, 0, base.width, base.height);\n  const w = base.width, h = base.height;\n  const cos = Math.abs(Math.cos(rad)), sin = Math.abs(Math.sin(rad));\n  const rw = Math.round(w*cos + h*sin), rh = Math.round(w*sin + h*cos);\n  const rot = document.createElement(\"canvas\"); const rctx = rot.getContext(\"2d\")!;\n  rot.width = rw; rot.height = rh;\n  rctx.translate(rw/2, rh/2); rctx.rotate(rad); rctx.drawImage(base, -w/2, -h/2);\n  return rot;\n}\nfunction edgeEnergy(c:HTMLCanvasElement) {\n  const ctx = c.getContext(\"2d\"); if(!ctx) return 0;\n  const {width:w,height:h} = c;\n  const data = ctx.getImageData(0,0,w,h).data;\n  let e=0;\n  for (let y=1;y<h-1;y+=2){\n    for (let x=1;x<w-1;x+=2){\n      const i=(y*w+x)*4;\n      const g = (0.2126*data[i] + 0.7152*data[i+1] + 0.0722*data[i+2]);\n      const gx = (0.2126*data[i+4] + 0.7152*data[i+5] + 0.0722*data[i+6]) - (0.2126*data[i-4] + 0.7152*data[i-3] + 0.0722*data[i-2]);\n      const gy = (0.2126*data[i+4*w] + 0.7152*data[i+4*w+1] + 0.0722*data[i+4*w+2]) - (0.2126*data[i-4*w] + 0.7152*data[i-4*w+1] + 0.0722*data[i-4*w+2]);\n      e += Math.abs(gx)+Math.abs(gy)+g*0.002;\n    }\n  }\n  return e/(w*h);\n}\n\n// ìœˆë„ ê²€ì¶œ + ëŒ€ë¹„ë³´ì • + í”„ë¡œí•„\nfunction findWindowRect(c:HTMLCanvasElement){\n  const ctx=c.getContext(\"2d\"); if(!ctx) throw new Error(\"Canvas context missing\");\n  const {width:w, height:h}=c;\n  const img = ctx.getImageData(0,0,w,h);\n  const data = img.data;\n\n  const br = new Float32Array(w*h);\n  const sat = new Float32Array(w*h);\n  for(let y=0;y<h;y++){\n    for(let x=0;x<w;x++){\n      const i=(y*w+x)*4, R=data[i], G=data[i+1], B=data[i+2];\n      const max = Math.max(R,G,B), min = Math.min(R,G,B);\n      br[y*w+x] = 0.2126*R+0.7152*G+0.0722*B;\n      sat[y*w+x] = max===0?0:(max-min)/max;\n    }\n  }\n  const col = new Float32Array(w), row = new Float32Array(h);\n  for(let x=0;x<w;x++){ let s=0; for(let y=0;y<h;y++) s+=br[y*w+x]; col[x]=s/h; }\n  for(let y=0;y<h;y++){ let s=0; for(let x=0;x<w;x++) s+=br[y*w+x]; row[y]=s/w; }\n\n  const dcol = movingAverage(Array.from(col).map((v,i)=> i?Math.abs(v-col[i-1]):0), Math.max(9,Math.floor(w/40)));\n  const drow = movingAverage(Array.from(row).map((v,i)=> i?Math.abs(v-row[i-1]):0), Math.max(9,Math.floor(h/40)));\n\n  const thx = quantile(dcol, 0.90), thy = quantile(drow, 0.90);\n  const xs:number[]=[]; for(let i=1;i<w-1;i++) if(dcol[i]>thx && dcol[i]>=dcol[i-1] && dcol[i]>dcol[i+1]) xs.push(i);\n  const ys:number[]=[]; for(let i=1;i<h-1;i++) if(drow[i]>thy && drow[i]>=drow[i-1] && drow[i]>drow[i+1]) ys.push(i);\n\n  const pickPair=(arr:number[], N:number)=> {\n    if(arr.length<2) return [Math.round(N*0.12), Math.round(N*0.88)];\n    let L=arr[0], R=arr[arr.length-1], gap=R-L;\n    for(let i=0;i<arr.length;i++) for(let j=i+1;j<arr.length;j++){\n      const g=arr[j]-arr[i]; if(g>gap){gap=g; L=arr[i]; R=arr[j];}\n    }\n    if(gap < N*0.20) return [Math.round(N*0.12), Math.round(N*0.88)];\n    return [L,R];\n  };\n  let [x0,x1]=pickPair(xs,w), [y0,y1]=pickPair(ys,h);\n  const padX = Math.round((x1-x0)*0.03), padY = Math.round((y1-y0)*0.05);\n  x0 = clamp(x0+padX,0,w-2); x1 = clamp(x1-padX,1,w-1);\n  y0 = clamp(y0+padY,0,h-2); y1 = clamp(y1-padY,1,h-1);\n\n  const glareMask = new Uint8Array(w*h);\n  const brHi = quantile(br, 0.96), brLo = quantile(br, 0.05);\n  for (let i=0;i<w*h;i++){\n    if (br[i]>brHi && sat[i]<0.12) glareMask[i]=1;\n    if (br[i]<brLo*0.6) glareMask[i]=1;\n  }\n\n  const win: number[] = [];\n  for(let yy=y0;yy<=y1;yy++) for(let xx=x0;xx<=x1;xx++) win.push(br[yy*w+xx]);\n  const p1 = quantile(win, 0.01), p99 = quantile(win, 0.99) || 1;\n  const a = 255/Math.max(1, (p99-p1)); const b = -a*p1;\n  for(let yy=y0;yy<=y1;yy++){\n    for(let xx=x0;xx<=x1;xx++){\n      const k=yy*w+xx; br[k] = clamp(a*br[k]+b, 0, 255);\n    }\n  }\n\n  return {x0,x1,y0,y1, glareMask, br};\n}\nfunction analyzeWindow(c:HTMLCanvasElement, rect:{x0:number;x1:number;y0:number;y1:number;glareMask:Uint8Array;br:Float32Array}) {\n  const ctx=c.getContext(\"2d\"); if(!ctx) throw new Error(\"Canvas context missing\");\n  const {x0,x1,y0,y1,glareMask}=rect; const w=c.width;\n  const data = ctx.getImageData(0,0,c.width,c.height).data;\n\n  const profX:number[] = [];\n  for(let x=x0;x<=x1;x++){\n    let s=0, cnt=0;\n    for(let y=y0;y<=y1;y++){\n      const i=(y*w+x), ii=i*4;\n      if (glareMask[i]) continue;\n      const R=data[ii], G=data[ii+1], B=data[ii+2];\n      const sum = R+G+B || 1;\n      const chroma = R/sum - 0.5*((G/sum)+(B/sum));\n      s += chroma; cnt++;\n    }\n    profX.push(cnt? s/cnt : 0);\n  }\n  const profY:number[] = [];\n  for(let y=y0;y<=y1;y++){\n    let s=0,cnt=0;\n    for(let x=x0;x<=x1;x++){\n      const i=(y*w+x), ii=i*4;\n      if (glareMask[i]) continue;\n      const R=data[ii], G=data[ii+1], B=data[ii+2];\n      const sum=R+G+B || 1;\n      const chroma = R/sum - 0.5*((G/sum)+(B/sum));\n      s += chroma; cnt++;\n    }\n    profY.push(cnt? s/cnt : 0);\n  }\n  return { profX, profY };\n}\nfunction peaksFromProfile(arr:number[]){\n  const bg = movingAverage(arr, Math.max(11, Math.floor(arr.length/12)));\n  const detr = arr.map((v,i)=> bg[i]-v);\n  const mean = detr.reduce((a,b)=>a+b,0)/Math.max(1,detr.length);\n  const q25 = quantile(detr, 0.25), q75 = quantile(detr, 0.75);\n  const iqr = Math.max(1e-6, q75 - q25);\n  const sigma = iqr / 1.349;\n  const z = detr.map(v => (v - mean) / (sigma || 1));\n  const edgeMargin=Math.max(4, Math.floor(arr.length*0.04));\n  const peaks:Peak[]=[];\n  for(let i=1;i<z.length-1;i++){\n    if(z[i]>=z[i-1] && z[i]>z[i+1]){\n      if(i<edgeMargin || z.length-1-i<edgeMargin) continue;\n      const half=z[i]*0.5; let L=i,R=i,area=z[i];\n      while(L>0&&z[L]>half){L--;area+=z[L];}\n      while(R<z.length-1&&z[R]>half){R++;area+=z[R];}\n      peaks.push({ idx:i, z:z[i], width:R-L, area });\n    }\n  }\n  peaks.sort((a,b)=>b.z-a.z);\n  const quality=(peaks[0]?.z||0)+0.8*(peaks[1]?.z||0);\n  return { z, peaks, quality };\n}\n\nexport default function LfaAnalyzer() {\n  const [imageUrl, setImageUrl] = useState<string | null>(null);\n  const [mode, setMode] = useState<Mode>(\"auto\");\n  const [sensitivity, setSensitivity] = useState<Sensitivity>(\"balanced\");\n  const [controlPos, setControlPos] = useState<ControlPos>(\"auto\");\n  const [requireTwoLines, setRequireTwoLines] = useState(true);\n\n  const [result, setResult] = useState<{ verdict: Verdict; detail: string; confidence: \"í™•ì‹¤\"|\"ë³´í†µ\"|\"ì•½í•¨\" }|null>(null);\n  const [busy, setBusy] = useState(false);\n  const [appliedRotation, setAppliedRotation] = useState(0);\n\n  const imgRef = useRef<HTMLImageElement|null>(null);\n  const canvasRef = useRef<HTMLCanvasElement|null>(null);\n  const overlayRef = useRef<HTMLCanvasElement|null>(null);\n\n  // manual guides\n  const [guideC, setGuideC] = useState<number|null>(null);\n  const [guideT, setGuideT] = useState<number|null>(null);\n\n  // ===== ì¦ìƒ ê¸°ë¡ ê³µí†µ ìƒíƒœ =====\n  const [symptom, setSymptom] = useState<Omit<SymptomEntry, \"ts\">>({\n    sneezing: 0, rhinorrhea: 0, congestion: 0, itchyEyes: 0, cough: 0, fever: 0, note: \"\", medsTaken: []\n  });\n  const [log, setLog] = useState<SymptomEntry[]>([]);\n  const [links, setLinks] = useState<NearbyLinks>({ lat: null, lng: null });\n  const [lastRecs, setLastRecs] = useState<Rec[]|null>(null);\n  const [lastFlags, setLastFlags] = useState<{ danger?: string[] }|null>(null);\n\n  // âœ… ìŒì„± ì„¹ì…˜: ë¼ì´íŠ¸ í¼ í† ê¸€\n  const [showNegLight, setShowNegLight] = useState(false);\n\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(\"lfa_symptom_log_v1\");\n      if (raw) setLog(JSON.parse(raw));\n    } catch {}\n  }, []);\n\n  const saveLog = (entry: SymptomEntry) => {\n    const next = [entry, ...log].slice(0, 200);\n    setLog(next);\n    try { localStorage.setItem(\"lfa_symptom_log_v1\", JSON.stringify(next)); } catch {}\n  };\n\n  const requestLocation = () => {\n    if (!navigator.geolocation) { setLinks({ lat: null, lng: null }); return; }\n    navigator.geolocation.getCurrentPosition(\n      (pos) => {\n        const { latitude: lat, longitude: lng } = pos.coords;\n        const gHosp = `https://www.google.com/maps/search/%EB%B3%91%EC%9B%90/@${lat},${lng},15z`;\n        const gPhar = `https://www.google.com/maps/search/%EC%95%BD%EA%B5%AD/@${lat},${lng},15z`;\n        const nHosp = `https://map.naver.com/p/search/%EB%B3%91%EC%9B%90?c=${lng},${lat},15,0,0,0,dh`;\n        const nPhar = `https://map.naver.com/p/search/%EC%95%BD%EA%B5%AD?c=${lng},${lat},15,0,0,0,dh`;\n        setLinks({ lat, lng, googleHospital: gHosp, googlePharmacy: gPhar, naverHospital: nHosp, naverPharmacy: nPhar });\n      },\n      () => setLinks({ lat: null, lng: null })\n    );\n  };\n\n  // ê·œì¹™ ê¸°ë°˜ ì¶”ì²œ\n  const OTC_LABELS: Record<string, string> = {\n    loratadine: \"ë¡œë¼íƒ€ë”˜(ëœ ì¡¸ë¦¼ ê²½êµ¬ í•­íˆìŠ¤íƒ€ë¯¼, 1ì¼ 1íšŒ)\",\n    cetirizine: \"ì„¸í‹°ë¦¬ì§„(íš¨ê³¼ ê°•í•¨, ì¡¸ë¦¼ ê°€ëŠ¥, 1ì¼ 1íšŒ)\",\n    fluticasone: \"í”Œë£¨í‹°ì¹´ì† ë¹„ê°• ìŠ¤í”„ë ˆì´(ì½”ë§‰í˜/ì¬ì±„ê¸°/ì½§ë¬¼)\",\n    saline: \"ì‹ì—¼ìˆ˜ ë¹„ê°•ì„¸ì²™(ë³´ì¡°)\",\n  };\n  const computeRecs = (s: Omit<SymptomEntry,\"ts\">): { recs: Rec[]; danger?: string[] } => {\n    const { sneezing, rhinorrhea, congestion, itchyEyes, cough, fever } = s;\n\n    const scoreLoratadine = sneezing*1.0 + itchyEyes*1.0 + rhinorrhea*0.8;\n    const scoreCetirizine = sneezing*1.1 + itchyEyes*1.1 + rhinorrhea*0.8 + (Math.max(sneezing, itchyEyes) >= 7 ? 2 : 0);\n    const scoreFluticasone = congestion*1.2 + sneezing*0.3 + rhinorrhea*0.3 + (congestion>=7 ? 1.5 : 0);\n    const scoreSaline = congestion*0.6 + rhinorrhea*0.8 + itchyEyes*0.2 + sneezing*0.2;\n\n    const recs: Rec[] = [\n      { key: \"fluticasone\", label: OTC_LABELS.fluticasone, score: scoreFluticasone, reason: congestion>=6 ? \"ì½”ë§‰í˜ ì ìˆ˜ê°€ ë†’ì•„ ë¹„ê°• ìŠ¤í…Œë¡œì´ë“œ ê¶Œì¥.\" : \"ì½”ë§‰í˜Â·ì¬ì±„ê¸°Â·ì½§ë¬¼ ì „ë°˜ì— ë„ì›€.\" },\n      { key: \"loratadine\",  label: OTC_LABELS.loratadine,  score: scoreLoratadine,  reason: (sneezing+itchyEyes)>=10 ? \"ì¬ì±„ê¸°/ëˆˆ ê°€ë ¤ì›€ì´ ëšœë ·â€”ëœ ì¡¸ë¦¬ëŠ” í•­íˆìŠ¤íƒ€ë¯¼.\" : \"ê²½êµ¬ í•­íˆìŠ¤íƒ€ë¯¼ ê¸°ë³¸ ì˜µì…˜.\", caution:\"ê°„ì§ˆí™˜/ì„ì‹ Â·ìˆ˜ìœ /ë‹¤ì•½ì œ ë³µìš© ì‹œ ìƒë‹´.\" },\n      { key: \"cetirizine\",  label: OTC_LABELS.cetirizine,  score: scoreCetirizine,  reason: Math.max(sneezing, itchyEyes) >= 7 ? \"ì¦ìƒì´ ê°•í•´ íš¨ê³¼ ê°•í•œ ê³„ì—´ ì œì•ˆ(ì¡¸ë¦¼ ê°€ëŠ¥).\" : \"í•­íˆìŠ¤íƒ€ë¯¼ ëŒ€ì²´ ì˜µì…˜(ì¡¸ë¦¼ ê°€ëŠ¥).\", caution:\"ìš´ì „/ì‹œí—˜ ì „ ì£¼ì˜.\" },\n      { key: \"saline\",      label: OTC_LABELS.saline,      score: scoreSaline,      reason: rhinorrhea>=5 || congestion>=5 ? \"ì„¸ì²™ìœ¼ë¡œ ì ì•¡ ì œê±°Â·í†µê¸° ê°œì„ .\" : \"ì €ìê·¹ ë³´ì¡°ìš”ë²•.\" },\n    ].sort((a,b)=> b.score - a.score);\n\n    const danger: string[] = [];\n    if (fever>=7) danger.push(\"ë°œì—´ ì ìˆ˜ê°€ ë†’ìŠµë‹ˆë‹¤. ê°ì—¼ ê°€ëŠ¥ì„± ê³ ë ¤í•´ ì§„ë£Œ ê¶Œì¥.\");\n    if (cough>=7) danger.push(\"ê¸°ì¹¨ ì ìˆ˜ê°€ ë†’ìŠµë‹ˆë‹¤. í˜¸í¡ê¸° ê°ì—¼/ì²œì‹ ë“± ê°ë³„ ìœ„í•´ ì§„ë£Œ ê¶Œì¥.\");\n    if (fever>=4 && cough>=4) danger.push(\"ë°œì—´+ê¸°ì¹¨ ë™ë°˜: ì•Œë ˆë¥´ê¸° ì™¸ ê°ì—¼ ê°€ëŠ¥ì„±. ì§„ë£Œ ìš°ì„ .\");\n\n    return { recs, danger: danger.length? danger : undefined };\n  };\n\n  // ë¶„ì„ (í•œ ë²ˆ)\n  const analyzeOnce = (forceAxis?: \"x\"|\"y\")=>{\n    if (!imgRef.current || !canvasRef.current || !overlayRef.current) return {ok:false};\n\n    const img = imgRef.current;\n    const angles:number[]=[]; for(let a=-30;a<=30;a+=3) angles.push(a);\n    let best:{angle:number; canvas:HTMLCanvasElement; energy:number}|null = null;\n    for(const a of angles){\n      const c = drawRotated(img, a);\n      const e = edgeEnergy(c);\n      if (!best || e>best.energy) best={angle:a, canvas:c, energy:e};\n    }\n    setAppliedRotation(best!.angle);\n\n    const out = canvasRef.current!; const octx = out.getContext(\"2d\")!;\n    out.width = best!.canvas.width; out.height = best!.canvas.height;\n    octx.drawImage(best!.canvas, 0, 0);\n\n    const rect = findWindowRect(best!.canvas);\n    const overlay = overlayRef.current!; const ov = overlay.getContext(\"2d\")!;\n    overlay.width = out.width; overlay.height = out.height;\n    ov.clearRect(0,0,overlay.width,overlay.height);\n    ov.fillStyle=\"rgba(0,0,0,0.06)\";\n    ov.fillRect(0,0,rect.x0,overlay.height);\n    ov.fillRect(rect.x1,0,overlay.width-rect.x1,overlay.height);\n    ov.fillRect(rect.x0,0,rect.x1-rect.x0,rect.y0);\n    ov.fillRect(rect.x0,rect.y1,rect.x1-rect.x0,overlay.height-rect.y1);\n    ov.strokeStyle=\"#22c55e\"; ov.lineWidth=2;\n    ov.strokeRect(rect.x0+0.5,rect.y0+0.5,(rect.x1-rect.x0)-1,(rect.y1-rect.y0)-1);\n\n    const { profX, profY } = analyzeWindow(best!.canvas, rect);\n    const px = peaksFromProfile(profX);\n    const py = peaksFromProfile(profY);\n\n    let axis: \"x\"|\"y\";\n    if (forceAxis){ axis = forceAxis; }\n    else {\n      const h = rect.y1-rect.y0, w = rect.x1-rect.x0;\n      axis = h > w*1.2 ? (py.quality >= px.quality*0.85 ? \"y\" : (px.quality>=py.quality ? \"x\" : \"y\"))\n                       : (px.quality >= py.quality ? \"x\" : \"y\");\n    }\n\n    const sel = axis===\"x\" ? px : py;\n    const idxToCanvas = (i:number)=> axis===\"x\" ? rect.x0 + i : rect.y0 + i;\n    const peaks = sel.peaks.map(p=> ({...p, idx: idxToCanvas(p.idx)}));\n\n    const preset = PRESETS[sensitivity];\n    const unit = axis===\"x\" ? (rect.x1-rect.x0) : (rect.y1-rect.y0);\n    const maxWidth = Math.max(3, Math.round(unit * preset.MAX_WIDTH_FRAC));\n    const minSep = Math.round(unit * preset.MIN_SEP_FRAC);\n    const maxSep = Math.round(unit * preset.MAX_SEP_FRAC);\n    const valid = peaks.filter(p=> p.width<=maxWidth);\n\n    const ov2 = overlayRef.current!.getContext(\"2d\");\n    if (ov2){\n      ov2.lineWidth=3;\n      for (const p of valid){\n        ov2.strokeStyle = \"#8884\";\n        if (axis===\"x\"){ ov2.beginPath(); ov2.moveTo(p.idx+0.5, rect.y0+2); ov2.lineTo(p.idx+0.5, rect.y1-2); ov2.stroke(); }\n        else { ov2.beginPath(); ov2.moveTo(rect.x0+2, p.idx+0.5); ov2.lineTo(rect.x1-2, p.idx+0.5); ov2.stroke(); }\n      }\n    }\n\n    if (!valid.length){\n      return { ok:false, reason:\"nopeaks\", rect, axis };\n    }\n\n    const byPos = [...valid].sort((a,b)=>a.idx-b.idx);\n    let control:Peak|undefined, test:Peak|undefined;\n    const tryDir = (dir:1|-1) => {\n      const arr = dir===1 ? byPos : [...byPos].reverse();\n      control = arr[0];\n      test = valid.find(p=>{\n        const d = (dir===1) ? (p.idx-control!.idx) : (control!.idx-p.idx);\n        return d>minSep && d<maxSep;\n      });\n    };\n    if (controlPos===\"auto\"){\n      tryDir(1); const c1=control, t1=test;\n      tryDir(-1); const c2=control, t2=test;\n      const pair1Score = (c1?.z||0)+(t1?.z||0);\n      const pair2Score = (c2?.z||0)+(t2?.z||0);\n      if (pair1Score >= pair2Score){ control=c1; test=t1; } else { control=c2; test=t2; }\n    } else {\n      if (axis===\"x\"){ if (controlPos===\"left\") tryDir(1); else tryDir(-1); }\n      else { if (controlPos===\"top\") tryDir(1); else tryDir(-1); }\n    }\n\n    const CONTROL_MIN = preset.CONTROL_MIN;\n    const TEST_MIN_ABS = preset.TEST_MIN_ABS;\n    const TEST_MIN_REL = preset.TEST_MIN_REL; // âœ… ì˜¤íƒ€ ìˆ˜ì •\n    const MIN_AREA_FRAC = preset.MIN_AREA_FRAC;\n\n    let verdict: Verdict = \"Invalid\";\n    let detail = \"\";\n    let confidence: \"í™•ì‹¤\" | \"ë³´í†µ\" | \"ì•½í•¨\" = \"ì•½í•¨\";\n\n    const decide = (c?:Peak, t?:Peak, loosen=false)=>{\n      const cMin = loosen ? (CONTROL_MIN*0.9) : CONTROL_MIN;\n      const absMin = loosen ? (TEST_MIN_ABS*0.95) : TEST_MIN_ABS;\n      const relMin = loosen ? (TEST_MIN_REL*0.9) : TEST_MIN_REL;\n      const areaFrac = loosen ? (MIN_AREA_FRAC*0.85) : MIN_AREA_FRAC;\n\n      if (!c || c.z < cMin){\n        verdict=\"Invalid\"; detail=`ì»¨íŠ¸ë¡¤ ë¼ì¸ì´ ì•½í•˜ê±°ë‚˜ ì¸ì‹ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤ (C z=${(c?.z??0).toFixed(2)}).`;\n        return;\n      }\n      if (requireTwoLines && !t){\n        verdict=\"Negative\"; detail=`ìŒì„±: ì»¨íŠ¸ë¡¤ë§Œ ìœ íš¨ (C z=${c.z.toFixed(2)})`; confidence = c.z>2.2 ? \"í™•ì‹¤\":\"ë³´í†µ\";\n        return;\n      }\n      if (t){\n        const areaOK = t.area >= c.area * areaFrac;\n        const absOK  = t.z >= absMin;\n        const relOK  = t.z >= c.z * relMin;\n        if (areaOK && absOK && relOK){\n          verdict=\"Positive\";\n          detail=`ì–‘ì„±: C z=${c.z.toFixed(2)}, T z=${t.z.toFixed(2)} (T/C area ${(t.area/c.area).toFixed(2)})`;\n          confidence = t.z>2.0 ? \"í™•ì‹¤\" : \"ë³´í†µ\";\n        } else {\n          verdict=\"Negative\";\n          detail=`ìŒì„±: í…ŒìŠ¤íŠ¸ ë¼ì¸ì´ ê¸°ì¤€ ë¯¸ë‹¬ (area:${areaOK?\"ok\":\"x\"}/abs:${absOK?\"ok\":\"x\"}/rel:${relOK?\"ok\":\"x\"})`;\n          confidence = (absOK||relOK) ? \"ì•½í•¨\":\"í™•ì‹¤\";\n        }\n      } else {\n        verdict=\"Negative\"; detail=`ìŒì„±: ì»¨íŠ¸ë¡¤ë§Œ ìœ íš¨`; confidence=\"ë³´í†µ\";\n      }\n    };\n\n    decide(control, test, false);\n    if (verdict===\"Invalid\") {\n      const alt = analyzeOnce(axis===\"x\" ? \"y\" : \"x\");\n      if ((alt as any).ok && (alt as any).result) return alt as any;\n      decide(control, test, true);\n    }\n\n    const ov3 = overlayRef.current!.getContext(\"2d\");\n    if (ov3){\n      const drawLine=(idx:number,color:string)=>{\n        ov3.strokeStyle=color; ov3.lineWidth=3; ov3.beginPath();\n        if (axis===\"x\"){ ov3.moveTo(idx+0.5, rect.y0+2); ov3.lineTo(idx+0.5, rect.y1-2); }\n        else { ov3.moveTo(rect.x0+2, idx+0.5); ov3.lineTo(rect.x1-2, idx+0.5); }\n        ov3.stroke();\n      };\n      if (control) drawLine(control.idx, \"#3b82f6\");\n      if (test) drawLine(test.idx, \"#ef4444\");\n    }\n\n    return { ok:true, result:{ verdict, detail, confidence } };\n  };\n\n  const analyze = useCallback(()=>{\n    if (!imgRef.current || !canvasRef.current || !overlayRef.current) return;\n    try{\n      setBusy(true);\n      const out = analyzeOnce();\n      if (out && (out as any).ok && (out as any).result){\n        setResult((out as any).result);\n      } else if (out && (out as any).reason===\"nopeaks\"){\n        setResult({verdict:\"Invalid\", detail:\"ìŠ¤íŠ¸ë¦½ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë°˜ì‚¬/ê·¸ë¦¼ì ì¤„ì´ê³  ì°½ì„ í™”ë©´ ê°€ìš´ë°ì— ë§ì¶°ì£¼ì„¸ìš”.\", confidence:\"ì•½í•¨\"});\n      } else {\n        setResult({verdict:\"Invalid\", detail:\"ì²˜ë¦¬ ì‹¤íŒ¨(ì•Œ ìˆ˜ ì—†ìŒ). ë‹¤ë¥¸ ê°ë„ì—ì„œ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.\", confidence:\"ì•½í•¨\"});\n      }\n    } catch(err:any){\n      console.error(err);\n      setResult({ verdict:\"Invalid\", detail:`ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: ${err?.message||\"unknown\"}`, confidence:\"ì•½í•¨\" });\n    } finally{\n      setBusy(false);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sensitivity, controlPos, requireTwoLines]);\n\n  const manualAnalyze = useCallback(()=>{\n    if (!canvasRef.current){ return; }\n    const c = canvasRef.current, ctx=c.getContext(\"2d\"); if(!ctx) return;\n    if (guideC==null){ setResult({verdict:\"Invalid\", detail:\"ìˆ˜ë™ ëª¨ë“œ: C ë¼ì¸ì„ ë¨¼ì € ì§€ì •í•˜ì„¸ìš”.\", confidence:\"ì•½í•¨\"}); return; }\n\n    const band = Math.max(2, Math.round(c.width*0.01));\n    const sample = (x0:number,y0:number,x1:number,y1:number)=>{\n      const w=x1-x0, h=y1-y0; if(w<=0||h<=0) return {m:0, s:1};\n      const d = ctx.getImageData(x0,y0,w,h).data; let sum=0, sum2=0, n=0;\n      for(let i=0;i<d.length;i+=4){\n        const R=d[i], G=d[i+1], B=d[i+2]; const S=R+G+B||1;\n        const chroma = R/S - 0.5*((G/S)+(B/S));\n        sum+=chroma; sum2+=chroma*chroma; n++;\n      }\n      const m=sum/n, v=Math.max(1e-8,sum2/n - m*m);\n      return {m, s:Math.sqrt(v)};\n    };\n    const bg = sample(0,0,c.width,c.height);\n    const zAt = (x:number)=> (sample(Math.max(0,Math.round(x-band/2)),0,Math.min(c.width,Math.round(x+band/2)),c.height).m - bg.m)/bg.s;\n    const zC = zAt(guideC), zT = guideT!=null ? zAt(guideT) : -999;\n\n    const preset=PRESETS[sensitivity];\n    if (zC < preset.CONTROL_MIN){\n      setResult({verdict:\"Invalid\", detail:`ì»¨íŠ¸ë¡¤(z=${zC.toFixed(2)})ì´ ì•½í•©ë‹ˆë‹¤.`, confidence:\"ì•½í•¨\"}); return;\n    }\n    if (requireTwoLines && guideT==null){\n      setResult({verdict:\"Negative\", detail:`ìŒì„±(ìˆ˜ë™): ì»¨íŠ¸ë¡¤ë§Œ ìœ íš¨`, confidence: zC>2.2?\"í™•ì‹¤\":\"ë³´í†µ\"}); return;\n    }\n    if (guideT!=null){\n      const absOK = zT >= preset.TEST_MIN_ABS;\n      const relOK = zT >= zC * preset.TEST_MIN_REL;\n      const verdict:Verdict = (absOK && relOK) ? \"Positive\" : \"Negative\";\n      setResult({\n        verdict,\n        detail: verdict===\"Positive\" ? `ì–‘ì„±(ìˆ˜ë™): C z=${zC.toFixed(2)}, T z=${zT.toFixed(2)}`\n                                     : `ìŒì„±(ìˆ˜ë™): T ê¸°ì¤€ ë¯¸ë‹¬ (abs:${absOK?\"ok\":\"x\"}/rel:${relOK?\"ok\":\"x\"})`,\n        confidence: verdict===\"Positive\" ? (zT>2.0?\"í™•ì‹¤\":\"ë³´í†µ\") : (absOK||relOK?\"ì•½í•¨\":\"í™•ì‹¤\")\n      });\n    }\n  }, [guideC, guideT, sensitivity, requireTwoLines]);\n\n  // íŒŒì¼/ë“œë˜ê·¸\n  const onPickFile = (f:File)=>{ setImageUrl(URL.createObjectURL(f)); setResult(null); setGuideC(null); setGuideT(null); setShowNegLight(false); };\n  const onInput = (e:React.ChangeEvent<HTMLInputElement>)=>{ const f=e.target.files?.[0]; if(f) onPickFile(f); };\n  const stop=(e:React.DragEvent)=>e.preventDefault();\n  const onDrop=(e:React.DragEvent<HTMLDivElement>)=>{ e.preventDefault(); const f=e.dataTransfer.files?.[0]; if(f) onPickFile(f); };\n\n  useEffect(()=>{ if(imageUrl){ const t=setTimeout(()=> analyze(), 120); return ()=>clearTimeout(t); }}, [imageUrl, analyze]);\n\n  useEffect(()=>{\n    const o = overlayRef.current; if (!o) return;\n    const onClick = (e:MouseEvent)=>{\n      if (mode!==\"manual\") return;\n      const r = o.getBoundingClientRect(); const x = Math.round(e.clientX - r.left);\n      if (guideC==null) setGuideC(x); else if (guideT==null) setGuideT(x); else { setGuideC(x); setGuideT(null); }\n    };\n    o.addEventListener(\"click\", onClick);\n    return ()=>{ o.removeEventListener(\"click\", onClick); }\n  }, [mode, guideC, guideT]);\n\n  const VerdictBadge = useMemo(()=>{\n    if (!result) return null;\n    const base=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold\";\n    if (result.verdict===\"Positive\") return <span className={`${base} bg-red-100 text-red-800`}>âœ… ì–‘ì„±</span>;\n    if (result.verdict===\"Negative\") return <span className={`${base} bg-green-100 text-green-800`}>ğŸŸ¢ ìŒì„±</span>;\n    return <span className={`${base} bg-gray-200 text-gray-800`}>âš ï¸ ë¬´íš¨</span>;\n  }, [result]);\n\n  // ===== ìŒì„± ë¼ì´íŠ¸ ê¸°ë¡ í¼ =====\n  const NegativeLightForm = () => {\n    const [lite, setLite] = useState({ sneezing: 0, rhinorrhea: 0, congestion: 0, note: \"\" });\n\n    const addLite = () => {\n      const full: SymptomEntry = {\n        ts: new Date().toISOString(),\n        sneezing: lite.sneezing,\n        rhinorrhea: lite.rhinorrhea,\n        congestion: lite.congestion,\n        itchyEyes: 0,\n        cough: 0,\n        fever: 0,\n        note: lite.note,\n        medsTaken: [],\n      };\n      saveLog(full);\n      const { recs } = computeRecs(full);\n      setLastRecs(recs.slice(0,3));\n      setLastFlags(null);\n      alert(\"ê°„ë‹¨ ê¸°ë¡ì´ ì €ì¥ëì–´ìš”! ì•„ë˜ ì¶”ì²œì„ í™•ì¸í•´ë³´ì„¸ìš”.\");\n    };\n\n    const slider = (label:string, key: \"sneezing\"|\"rhinorrhea\"|\"congestion\")=>(\n      <div className=\"flex flex-col gap-1\">\n        <div className=\"flex justify-between text-xs text-gray-600\"><span>{label}</span><span>{lite[key]}/10</span></div>\n        <input type=\"range\" min={0} max={10} value={lite[key]} onChange={(e)=>setLite(v=>({...v,[key]:Number(e.target.value)}))}/>\n      </div>\n    );\n\n    return (\n      <div className=\"mt-3 p-4 rounded-2xl border bg-white\">\n        <div className=\"text-sm font-semibold mb-2\">ğŸ“ ì¦ìƒ ë¼ì´íŠ¸ ê¸°ë¡</div>\n        <div className=\"grid sm:grid-cols-2 gap-3\">\n          {slider(\"ì¬ì±„ê¸°\", \"sneezing\")}\n          {slider(\"ì½§ë¬¼\", \"rhinorrhea\")}\n          {slider(\"ì½”ë§‰í˜\", \"congestion\")}\n        </div>\n        <textarea\n          className=\"w-full mt-3 p-2 border rounded-lg text-sm\"\n          placeholder=\"ë©”ëª¨(ì„ íƒ)\"\n          value={lite.note}\n          onChange={(e)=>setLite(v=>({...v, note:e.target.value}))}\n        />\n        <div className=\"mt-3 flex items-center gap-2\">\n          <button className=\"px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm\" onClick={addLite}>ì €ì¥ & ì¶”ì²œ ë³´ê¸°</button>\n          <button className=\"px-3 py-2 rounded-xl border text-sm\" onClick={()=>setShowNegLight(false)}>ë‹«ê¸°</button>\n        </div>\n      </div>\n    );\n  };\n\n  // ===== ì¶”ì²œ íŒ¨ë„/ê·¼ì²˜/íˆìŠ¤í† ë¦¬ (Positiveì™€ ê³µìœ ) =====\n  const RecoPanel = () => {\n    if (!lastRecs && !lastFlags) return null;\n    return (\n      <div className=\"mt-4 p-4 rounded-2xl border border-amber-300 bg-amber-50\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <span className=\"text-base font-semibold\">ğŸ§ª ë§ì¶¤ ì•½ ì¶”ì²œ</span>\n          <span className=\"text-xs text-amber-700\">ìµœê·¼ ê¸°ë¡ì„ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ë¨</span>\n        </div>\n        {lastFlags?.danger && (\n          <div className=\"mb-3 p-3 rounded-xl bg-red-100 text-red-800 text-sm\">\n            <div className=\"font-semibold\">âš ï¸ ì£¼ì˜/ì§„ë£Œ ê¶Œê³ </div>\n            <ul className=\"list-disc ml-5\">{lastFlags.danger.map((d,i)=><li key={i}>{d}</li>)}</ul>\n          </div>\n        )}\n        {lastRecs && (\n          <div className=\"grid sm:grid-cols-2 gap-3\">\n            {lastRecs.map((r,i)=>(\n              <div key={r.key} className=\"p-3 rounded-xl bg-white border\">\n                <div className=\"text-sm font-semibold\">{i+1}. {r.label}</div>\n                <div className=\"text-xs text-gray-600 mt-1\">{r.reason}</div>\n                {r.caution && <div className=\"text-xs text-gray-500 mt-1\">ì£¼ì˜: {r.caution}</div>}\n              </div>\n            ))}\n          </div>\n        )}\n        <p className=\"mt-3 text-xs text-gray-500\">* ì¼ë°˜ì  ì •ë³´ ì œê³µ ëª©ì ì´ë©°, ê°œì¸ ë³‘ë ¥/ë³µìš© ì•½ë¬¼ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆì–´ìš”. ì˜ì‚¬Â·ì•½ì‚¬ì˜ ì•ˆë‚´ë¥¼ ìš°ì„ í•˜ì„¸ìš”.</p>\n      </div>\n    );\n  };\n\n  const NearbyBlock = () => (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center gap-2\">\n        <button onClick={requestLocation} className=\"px-3 py-1.5 rounded-lg bg-emerald-600 text-white\">\n          ğŸ“ ë‚´ ìœ„ì¹˜ë¡œ ì°¾ê¸°\n        </button>\n        {links.lat!=null && <span className=\"text-xs text-gray-600\">ìœ„ì¹˜ ì‚¬ìš© í—ˆìš©ë¨</span>}\n      </div>\n      <div className=\"grid sm:grid-cols-2 gap-2 text-sm\">\n        <a className=\"px-3 py-2 rounded-lg border hover:bg-gray-50\" href={links.googleHospital || \"https://www.google.com/maps/search/%EB%B3%91%EC%9B%90/\"} target=\"_blank\" rel=\"noreferrer\">Google ì§€ë„: ê·¼ì²˜ ë³‘ì›</a>\n        <a className=\"px-3 py-2 rounded-lg border hover:bg-gray-50\" href={links.googlePharmacy || \"https://www.google.com/maps/search/%EC%95%BD%EA%B5%AD/\"} target=\"_blank\" rel=\"noreferrer\">Google ì§€ë„: ê·¼ì²˜ ì•½êµ­</a>\n        <a className=\"px-3 py-2 rounded-lg border hover:bg-gray-50\" href={links.naverHospital || \"https://map.naver.com/p/search/%EB%B3%91%EC%9B%90\"} target=\"_blank\" rel=\"noreferrer\">ë„¤ì´ë²„ ì§€ë„: ê·¼ì²˜ ë³‘ì›</a>\n        <a className=\"px-3 py-2 rounded-lg border hover:bg-gray-50\" href={links.naverPharmacy || \"https://map.naver.com/p/search/%EC%95%BD%EA%B5%AD\"} target=\"_blank\" rel=\"noreferrer\">ë„¤ì´ë²„ ì§€ë„: ê·¼ì²˜ ì•½êµ­</a>\n      </div>\n      <p className=\"text-xs text-gray-500\">* ì‘ê¸‰ ì¦ìƒ(í˜¸í¡ê³¤ë€, ì˜ì‹ ì €í•˜, ê³ ì—´ ì§€ì† ë“±) ì‹œ ì¦‰ì‹œ 119 ë˜ëŠ” ì‘ê¸‰ì‹¤ë¡œ ì´ë™í•˜ì„¸ìš”.</p>\n    </div>\n  );\n\n  const MedsChecklist = () => {\n    const items = [\n      { key:\"loratadine\", label: OTC_LABELS.loratadine },\n      { key:\"cetirizine\", label: OTC_LABELS.cetirizine },\n      { key:\"fluticasone\", label: OTC_LABELS.fluticasone },\n      { key:\"saline\", label: OTC_LABELS.saline },\n    ];\n    const toggleMed = (key: string) => {\n      setSymptom(prev => {\n        const has = prev.medsTaken.includes(key);\n        return { ...prev, medsTaken: has ? prev.medsTaken.filter(k=>k!==key) : [...prev.medsTaken, key] };\n      });\n    };\n    return (\n      <div className=\"grid sm:grid-cols-2 gap-2\">\n        {items.map(m=>(\n          <label key={m.key} className=\"flex items-start gap-2 p-2 rounded-xl border hover:bg-gray-50 cursor-pointer\">\n            <input type=\"checkbox\" className=\"mt-1\" checked={symptom.medsTaken.includes(m.key)} onChange={()=>toggleMed(m.key)} />\n            <div><div className=\"text-sm font-medium\">{m.label}</div></div>\n          </label>\n        ))}\n      </div>\n    );\n  };\n\n  const SymptomLogger = () => {\n    const severitySlider = (label:string, key: keyof Omit<SymptomEntry,\"ts\"|\"note\"|\"medsTaken\">) => (\n      <div className=\"flex flex-col gap-1\">\n        <div className=\"flex justify-between text-xs text-gray-600\">\n          <span>{label}</span><span>{(symptom[key] as number)}/10</span>\n        </div>\n        <input type=\"range\" min={0} max={10} value={symptom[key] as number} onChange={(e)=>setSymptom(s=>({...s, [key]: Number(e.target.value)}))}/>\n      </div>\n    );\n    const addEntry = () => {\n      const entry: SymptomEntry = { ts: new Date().toISOString(), ...symptom };\n      saveLog(entry);\n      const { recs, danger } = computeRecs(symptom);\n      setLastRecs(recs.slice(0,3));\n      setLastFlags(danger ? { danger } : null);\n      setSymptom(s => ({ ...s, note: \"\" }));\n    };\n    return (\n      <div className=\"mt-4 p-4 rounded-2xl border bg-white\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <span className=\"text-base font-semibold\">ğŸ“ ì¦ìƒ ê¸°ë¡</span>\n          <span className=\"text-xs text-gray-500\">ë¡œì»¬ ì €ì¥(ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥)</span>\n        </div>\n        <div className=\"grid sm:grid-cols-2 gap-4\">\n          <div className=\"space-y-3\">\n            {severitySlider(\"ì¬ì±„ê¸°\", \"sneezing\")}\n            {severitySlider(\"ì½§ë¬¼\", \"rhinorrhea\")}\n            {severitySlider(\"ì½”ë§‰í˜\", \"congestion\")}\n            {severitySlider(\"ê°€ë ¤ìš´ ëˆˆ\", \"itchyEyes\")}\n            {severitySlider(\"ê¸°ì¹¨\", \"cough\")}\n            {severitySlider(\"ë°œì—´\", \"fever\")}\n          </div>\n          <div className=\"space-y-3\">\n            <div>\n              <div className=\"text-xs text-gray-600 mb-1\">ë³µìš©/ì‚¬ìš© ì¤‘ì¸ ì•½</div>\n              <MedsChecklist />\n            </div>\n            <div>\n              <div className=\"text-xs text-gray-600 mb-1\">ë©”ëª¨</div>\n              <textarea className=\"w-full min-h-[84px] p-2 border rounded-lg\" placeholder=\"íŠ¹ì´ì‚¬í•­/ìœ ë°œìš”ì¸ ë“±\"\n                        value={symptom.note} onChange={(e)=>setSymptom(s=>({...s, note: e.target.value}))}/>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button className=\"px-4 py-2 rounded-xl bg-indigo-600 text-white\" onClick={addEntry}>ê¸°ë¡ ì €ì¥ & ì•½ ì¶”ì²œ</button>\n              <button className=\"px-3 py-2 rounded-xl border\" onClick={()=>{\n                if (!confirm(\"ì¦ìƒ ê¸°ë¡ ì „ì²´ ì‚­ì œí• ê¹Œìš”?\")) return;\n                setLog([]); setLastRecs(null); setLastFlags(null);\n                try{ localStorage.removeItem(\"lfa_symptom_log_v1\"); }catch{}\n              }}>ê¸°ë¡ ì „ì²´ ì‚­ì œ</button>\n            </div>\n          </div>\n        </div>\n\n        <RecoPanel />\n\n        <div className=\"mt-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-base font-semibold\">ğŸ¥ ê·¼ì²˜ ë³‘ì› Â· ì•½êµ­</span>\n          </div>\n          <NearbyBlock />\n        </div>\n\n        <div className=\"mt-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-base font-semibold\">ğŸ“š ë‚´ ê¸°ë¡</span>\n            <span className=\"text-xs text-gray-500\">{log.length}ê±´</span>\n          </div>\n          {log.length===0 ? (\n            <div className=\"text-sm text-gray-500\">ì•„ì§ ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full text-sm\">\n                <thead>\n                  <tr className=\"text-left text-gray-500\">\n                    <th className=\"py-2 pr-3\">ì‹œê°„</th>\n                    <th className=\"py-2 pr-3\">ì¬ì±„ê¸°</th>\n                    <th className=\"py-2 pr-3\">ì½§ë¬¼</th>\n                    <th className=\"py-2 pr-3\">ì½”ë§‰í˜</th>\n                    <th className=\"py-2 pr-3\">ëˆˆê°€ë ¤ì›€</th>\n                    <th className=\"py-2 pr-3\">ê¸°ì¹¨</th>\n                    <th className=\"py-2 pr-3\">ë°œì—´</th>\n                    <th className=\"py-2 pr-3\">ì•½</th>\n                    <th className=\"py-2\">ë©”ëª¨</th>\n                  </tr>\n                </thead>\n                <tbody>\n                {log.map((e, i)=>(\n                  <tr key={i} className=\"border-t\">\n                    <td className=\"py-2 pr-3 whitespace-nowrap\">{new Date(e.ts).toLocaleString()}</td>\n                    <td className=\"py-2 pr-3\">{e.sneezing}</td>\n                    <td className=\"py-2 pr-3\">{e.rhinorrhea}</td>\n                    <td className=\"py-2 pr-3\">{e.congestion}</td>\n                    <td className=\"py-2 pr-3\">{e.itchyEyes}</td>\n                    <td className=\"py-2 pr-3\">{e.cough}</td>\n                    <td className=\"py-2 pr-3\">{e.fever}</td>\n                    <td className=\"py-2 pr-3\">\n                      {e.medsTaken.map(k=>OTC_LABELS[k]?.split(\"(\")[0]).filter(Boolean).join(\", \")}\n                    </td>\n                    <td className=\"py-2\">{e.note}</td>\n                  </tr>\n                ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const NegativeAdvice = ({ again }: { again?: () => void }) => (\n    <div className=\"mt-4 p-4 rounded-2xl border border-slate-300 bg-slate-50\">\n      <div className=\"flex items-center gap-2 mb-2\">\n        <span className=\"text-base font-semibold\">ğŸ§­ ìŒì„± ê°€ì´ë“œ</span>\n        <span className=\"text-xs text-slate-700\">ì´ë²ˆ íŒë…ì€ ìŒì„±ì…ë‹ˆë‹¤.</span>\n      </div>\n      <ul className=\"list-disc ml-5 text-sm text-slate-700 space-y-1\">\n        <li>ì¦ìƒì´ ì—†ê±°ë‚˜ ê²½ë¯¸í•œ ê²½ìš°, ì¶”ê°€ ì¡°ì¹˜ ì—†ì´ ê²½ê³¼ ê´€ì°°.</li>\n        <li>ì±„ì·¨ ì‹œì /ì±„ì·¨ëŸ‰/ì‚¬ì§„ í’ˆì§ˆ ë¬¸ì œë¡œ ìœ„ìŒì„± ê°€ëŠ¥ì„±.</li>\n      </ul>\n      <div className=\"mt-3 p-3 rounded-xl bg-white border text-sm\">\n        <div className=\"font-medium mb-2\">ğŸ¤” ì¦ìƒì´ ë‚˜íƒ€ë‚˜ê±°ë‚˜ ì‹¬í•´ì§€ë©´</div>\n        <ul className=\"list-disc ml-5 space-y-1\">\n          <li>24â€“48ì‹œê°„ ë‚´ ë™ì¼ ì¡°ê±´ìœ¼ë¡œ <b>ë‹¤ì‹œ í‚¤íŠ¸ ê²€ì‚¬</b> ê¶Œì¥.</li>\n          <li>ì¬ì±„ê¸°Â·ì½§ë¬¼Â·ì½”ë§‰í˜ ëšœë ·í•´ì§€ë©´ <b>ì¦ìƒ ê¸°ë¡</b> í›„ ë§ì¶¤ ì•ˆë‚´ í™•ì¸.</li>\n          <li>í˜¸í¡ê³¤ë€/ê³ ì—´ ì§€ì† ì‹œ <b>ì˜ë£Œê¸°ê´€ ìƒë‹´</b> ìš°ì„ .</li>\n        </ul>\n        <div className=\"mt-3 flex items-center gap-2\">\n          {again && <button onClick={again} className=\"px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-sm\">ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>}\n          <button onClick={()=>setShowNegLight(s=>!s)} className=\"px-3 py-1.5 rounded-lg border text-sm\">\n            {showNegLight ? \"ë¼ì´íŠ¸ ê¸°ë¡ ë‹«ê¸°\" : \"ì¦ìƒ ë¼ì´íŠ¸ ê¸°ë¡ ì—´ê¸°\"}\n          </button>\n        </div>\n      </div>\n      <p className=\"mt-2 text-xs text-slate-500\">* ì´ ë„êµ¬ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤. í•„ìš” ì‹œ ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.</p>\n\n      {/* í† ê¸€ëœ ë¼ì´íŠ¸ í¼ */}\n      {showNegLight && <NegativeLightForm />}\n\n      {/* ë¼ì´íŠ¸ ê¸°ë¡ í›„ ì¶”ì²œì´ ê³„ì‚°ë˜ë©´ ì•„ë˜ íŒ¨ë„ë¡œ í‘œì‹œ */}\n      <RecoPanel />\n    </div>\n  );\n\n  // ë Œë”\n  return (\n    <div className=\"w-full max-w-6xl mx-auto p-4 sm:p-6\">\n      <h1 className=\"text-2xl sm:text-3xl font-semibold mb-1\">ğŸ“· LFA QuickCheck v4.5.1</h1>\n      <p className=\"text-sm text-gray-600 mb-4\">ì„¸ë¡œ ë³´ì •Â·ìë™ íŒë… + (ì–‘ì„±) ì¦ìƒ ê¸°ë¡/ì•½ ì¶”ì²œ/ê·¼ì²˜ ì°¾ê¸° + (ìŒì„±) ì¬ê²€ì‚¬ ê°€ì´ë“œ & ë¼ì´íŠ¸ ê¸°ë¡</p>\n\n      <div onDrop={onDrop} onDragEnter={stop} onDragOver={stop}\n           className=\"border-2 border-dashed rounded-2xl p-6 mb-4 flex flex-col items-center justify-center text-center hover:bg-gray-50\">\n        <label className=\"w-full cursor-pointer\">\n          <input type=\"file\" accept=\"image/*\" capture=\"environment\" className=\"hidden\" onChange={onInput}/>\n          <div className=\"flex flex-col items-center gap-1\">\n            <div className=\"text-5xl\">â¬†ï¸</div>\n            <div className=\"font-medium\">ì‚¬ì§„ ì—…ë¡œë“œ / ë“œë˜ê·¸</div>\n            <div className=\"text-xs text-gray-500\">íŒ: ìœˆë„ê°€ í™”ë©´ì˜ 40~70%ê°€ ë˜ê²Œ ì±„ì›Œì„œ ì°ìœ¼ë©´ ê°€ì¥ ì •í™•í•´ìš”.</div>\n          </div>\n        </label>\n      </div>\n\n      <div className=\"flex flex-wrap items-center gap-3 mb-4\">\n        <button className=\"px-4 py-2 rounded-xl bg-indigo-600 text-white disabled:opacity-50\"\n                onClick={()=> mode===\"auto\" ? analyze() : manualAnalyze()} disabled={!imageUrl || busy}>\n          {busy ? \"ë¶„ì„ ì¤‘â€¦\" : \"ë¶„ì„\"}\n        </button>\n\n        <div className=\"flex items-center gap-2\">\n          <label className=\"text-xs text-gray-600\">ëª¨ë“œ</label>\n          <select className=\"px-2 py-1 border rounded-md\" value={mode} onChange={(e)=>setMode(e.target.value as Mode)}>\n            <option value=\"auto\">ìë™</option>\n            <option value=\"manual\">ìˆ˜ë™(C/T í´ë¦­)</option>\n          </select>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <label className=\"text-xs text-gray-600\">ë¯¼ê°ë„</label>\n          <select className=\"px-2 py-1 border rounded-md\" value={sensitivity} onChange={(e)=>setSensitivity(e.target.value as Sensitivity)}>\n            <option value=\"sensitive\">Sensitive</option>\n            <option value=\"balanced\">Balanced</option>\n            <option value=\"conservative\">Conservative</option>\n          </select>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <label className=\"text-xs text-gray-600\">ì»¨íŠ¸ë¡¤ ìœ„ì¹˜</label>\n          <select className=\"px-2 py-1 border rounded-md\" value={controlPos} onChange={(e)=>setControlPos(e.target.value as ControlPos)}>\n            <option value=\"auto\">ìë™</option>\n            <option value=\"left\">ì™¼ìª½</option><option value=\"right\">ì˜¤ë¥¸ìª½</option>\n            <option value=\"top\">ìœ„ìª½</option><option value=\"bottom\">ì•„ë˜ìª½</option>\n          </select>\n        </div>\n\n        <label className=\"flex items-center gap-2 text-xs text-gray-600\">\n          <input type=\"checkbox\" className=\"accent-indigo-600\" checked={requireTwoLines} onChange={(e)=>setRequireTwoLines(e.target.checked)} />\n          í…ŒìŠ¤íŠ¸ ë¼ì¸ í•„ìš”(2-ë¼ì¸ í‚¤íŠ¸)\n        </label>\n\n        {imageUrl && <span className=\"text-xs text-gray-500\">ìë™ íšŒì „: {appliedRotation}Â°</span>}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"relative w-full overflow-hidden rounded-2xl bg-gray-100\">\n          <div className=\"aspect-video w-full relative\">\n            {imageUrl ? <img ref={imgRef} src={imageUrl} alt=\"orig\" className=\"absolute inset-0 w-full h-full object-contain\"/> :\n              <div className=\"absolute inset-0 flex items-center justify-center text-gray-400 text-sm\">ì›ë³¸ ë¯¸ë¦¬ë³´ê¸°</div>}\n          </div>\n          <div className=\"p-2 text-xs text-gray-500\">ì›ë³¸</div>\n        </div>\n\n        <div className=\"relative w-full overflow-hidden rounded-2xl bg-gray-100\">\n          <div className=\"aspect-video w-full relative\">\n            <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain\"/>\n            {/* âœ… ìˆ˜ë™ í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ pointer-events-auto */}\n            <canvas ref={overlayRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-auto\"/>\n          </div>\n          <div className=\"p-2 text-xs text-gray-500\">ì²˜ë¦¬ ê²°ê³¼ (ìˆ˜ë™: ìº”ë²„ìŠ¤ í´ë¦­í•´ C/T ì§€ì •)</div>\n        </div>\n      </div>\n\n      <div className=\"mt-4 p-4 rounded-2xl border bg-white\">\n        <div className=\"flex items-center gap-3 mb-1\"><span className=\"text-base font-semibold\">íŒë… ê²°ê³¼</span>{VerdictBadge}</div>\n        <div className=\"text-sm text-gray-700\">{result ? `${result.detail} Â· ì‹ ë¢°ë„: ${result.confidence}` : \"ì‚¬ì§„ì„ ì˜¬ë¦¬ë©´ ìë™ìœ¼ë¡œ íŒë…í•©ë‹ˆë‹¤.\"}</div>\n      </div>\n\n      {/* ì–‘ì„±: ì „ì²´ ê¸°ë¡/ì¶”ì²œ/ê·¼ì²˜ */}\n      {result?.verdict === \"Positive\" && (\n        <div className=\"mt-4\">\n          <SymptomLogger />\n        </div>\n      )}\n\n      {/* ìŒì„±: ê°€ì´ë“œ + í† ê¸€ ë¼ì´íŠ¸ í¼ */}\n      {result?.verdict === \"Negative\" && (\n        <NegativeAdvice again={() => analyze()} />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}