module.exports=[60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)("log");return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-sky-50 to-white text-zinc-900",children:[(0,b.jsx)("header",{className:"sticky top-0 bg-white/80 backdrop-blur border-b",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"font-bold",children:"RhiniCoach MVP"}),(0,b.jsx)("nav",{className:"flex gap-2",children:[["log","로그"],["report","리포트"],["advice","약 추천"],["settings","설정"]].map(([c,e])=>(0,b.jsx)("button",{onClick:()=>d(c),className:`px-3 py-1.5 rounded-xl text-sm ${a===c?"bg-zinc-900 text-white":"bg-zinc-100"}`,children:e},c))})]})}),(0,b.jsxs)("main",{className:"max-w-5xl mx-auto px-4 py-6 grid gap-6",children:["log"===a&&(0,b.jsx)(g,{}),"report"===a&&(0,b.jsx)(h,{}),"advice"===a&&(0,b.jsx)(i,{}),"settings"===a&&(0,b.jsx)(j,{})]}),(0,b.jsx)("footer",{className:"py-8 text-center text-xs text-zinc-500",children:"Prototype · Wellness reference · Not medical advice"})]})}function e({children:a}){return(0,b.jsx)("div",{className:"rounded-2xl border p-4 bg-white",children:a})}function f(){return{ts:new Date().toISOString(),sneeze:0,rhinorrhea:0,congestion:0,itchyEyes:0,eyeRedness:0,throatItch:0,cough:0,postNasalDrip:0,headache:0,fatigue:0,sleepQuality:0,meds:{antihist:!1,incs:!1,leukotriene:!1},triggers:{dust:!1,pet:!1,pollen:!1,coldAir:!1},note:""}}function g(){let[a,d]=(0,c.useState)([]),[g,h]=(0,c.useState)(f());return(0,c.useEffect)(()=>{let a=localStorage.getItem("rc_symptoms");if(a)try{d(JSON.parse(a))}catch{}},[]),(0,b.jsxs)(e,{children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:"증상 일지"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"text-sm space-y-4",children:[(0,b.jsx)("div",{className:"grid gap-3",children:[{key:"sneeze",label:"재채기"},{key:"rhinorrhea",label:"콧물"},{key:"congestion",label:"코막힘"},{key:"itchyEyes",label:"눈 가려움"},{key:"eyeRedness",label:"눈 충혈"},{key:"throatItch",label:"목 가려움/이물감"},{key:"cough",label:"기침"},{key:"postNasalDrip",label:"후비루(목뒤로 넘어감)"},{key:"headache",label:"두통/안면압"},{key:"fatigue",label:"피로"},{key:"sleepQuality",label:"수면의 질(높을수록 나쁨)"}].map(({key:a,label:c})=>(0,b.jsxs)("label",{className:"block",children:[(0,b.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,b.jsx)("span",{children:c}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:g[a]})]}),(0,b.jsx)("input",{type:"range",min:0,max:3,step:1,value:g[a]??0,onChange:b=>{var c;return c=+b.target.value,void h(b=>({...b,[a]:c}))},className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-[11px] text-zinc-500",children:[(0,b.jsx)("span",{children:"0"}),(0,b.jsx)("span",{children:"1"}),(0,b.jsx)("span",{children:"2"}),(0,b.jsx)("span",{children:"3"})]})]},String(a)))}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium mb-1",children:"복용 약"}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.meds.antihist,onChange:a=>h({...g,meds:{...g.meds,antihist:a.target.checked}})})," 항히스타민"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.meds.incs,onChange:a=>h({...g,meds:{...g.meds,incs:a.target.checked}})})," 비강 스테로이드(INCS)"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.meds.leukotriene,onChange:a=>h({...g,meds:{...g.meds,leukotriene:a.target.checked}})})," 류코트리엔 억제제"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium mb-1",children:"트리거"}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.triggers.dust,onChange:a=>h({...g,triggers:{...g.triggers,dust:a.target.checked}})})," 집먼지/진드기"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.triggers.pet,onChange:a=>h({...g,triggers:{...g.triggers,pet:a.target.checked}})})," 반려동물"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.triggers.pollen,onChange:a=>h({...g,triggers:{...g.triggers,pollen:a.target.checked}})})," 꽃가루"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:g.triggers.coldAir,onChange:a=>h({...g,triggers:{...g.triggers,coldAir:a.target.checked}})})," 찬 공기/기온변화"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium mb-1",children:"메모"}),(0,b.jsx)("textarea",{className:"w-full px-3 py-2 rounded-lg bg-zinc-100",rows:3,value:g.note??"",onChange:a=>h({...g,note:a.target.value}),placeholder:"특이사항을 적어주세요(운동, 외출, 음식, 노출 등)"})]}),(0,b.jsx)("button",{onClick:function(){let b=[...a,g];localStorage.setItem("rc_symptoms",JSON.stringify(b)),d(b),h(f())},className:"px-4 py-2 rounded-xl bg-zinc-900 text-white",children:"기록 추가"})]}),(0,b.jsxs)("div",{className:"space-y-3 max-h-[70vh] overflow-auto pr-2",children:[a.slice().reverse().map((a,c)=>(0,b.jsxs)("div",{className:"rounded-xl border p-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:new Date(a.ts).toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs",children:[a.meds?.antihist?"AH ":"",a.meds?.incs?"INCS ":"",a.meds?.leukotriene?"LTRA":""]})]}),(0,b.jsxs)("div",{className:"mt-1 text-[13px] text-zinc-800",children:["재채기",a.sneeze," · 콧물",a.rhinorrhea," · 코막힘",a.congestion," · 눈가려움",a.itchyEyes," · 기침",a.cough]}),a.note&&(0,b.jsxs)("div",{className:"mt-1 text-[12px] text-zinc-600 line-clamp-2",children:["메모: ",a.note]})]},c)),0===a.length&&(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"아직 기록이 없습니다."})]})]})]})}function h(){let[a,d]=(0,c.useState)("37.5665"),[f,g]=(0,c.useState)("126.9780"),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null);async function p(b){i(!0);try{let c=await fetch(`/api/rhinitis?lat=${a}&lon=${f}&dayOffset=${b}`).then(a=>a.json());0===b&&k(c),1===b&&m(c),2===b&&o(c)}finally{i(!1)}}return(0,b.jsxs)(e,{children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:"비염 위험 리포트"}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-3 gap-2 text-sm mb-3",children:[(0,b.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:a,onChange:a=>d(a.target.value),placeholder:"위도 (lat)"}),(0,b.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:f,onChange:a=>g(a.target.value),placeholder:"경도 (lon)"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>p(0),className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:h?"계산 중...":"오늘"}),(0,b.jsx)("button",{type:"button",onClick:()=>p(1),className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:"내일"}),(0,b.jsx)("button",{type:"button",onClick:()=>p(2),className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:"모레"})]})]}),[["오늘",j],["내일",l],["모레",n]].map(([a,c])=>(0,b.jsxs)("div",{className:"mt-4 text-sm",children:[(0,b.jsx)("div",{className:"font-semibold",children:a}),c?(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsxs)("div",{children:["예측: ",(0,b.jsx)("b",{children:c.risk.level})," (점수 ",c.risk.score,"/5)"]}),(0,b.jsx)("ul",{className:"list-disc pl-5 mt-1",children:c.risk.tips.map(a=>(0,b.jsx)("li",{children:a},a))})]}):(0,b.jsx)("div",{className:"text-zinc-500",children:"아직 계산 전이에요."})]},a))]})}function i(){let[a,d]=(0,c.useState)(null),[f,g]=(0,c.useState)("37.5665"),[h,i]=(0,c.useState)("126.9780"),[j,k]=(0,c.useState)(0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]);async function p(){let a=await fetch(`/api/rhinitis?lat=${f}&lon=${h}&dayOffset=${j}`).then(a=>a.json());m({score:Number(a?.risk?.score??0),level:String(a?.risk?.level??"낮음")})}(0,c.useEffect)(()=>{try{let a=JSON.parse(localStorage.getItem("rc_symptoms")||"[]");if(Array.isArray(a)&&a.length>0){let b=a[a.length-1];d(b)}}catch{}},[]);let q=`https://www.google.com/maps/search/%EC%95%BD%EA%B5%AD/@${f},${h},15z`,r=`https://www.google.com/maps/search/%EC%9D%B4%EB%B9%84%EC%9D%B8%ED%9B%84%EA%B3%BC/@${f},${h},15z`,s=`https://map.naver.com/v5/search/%EC%95%BD%EA%B5%AD?c=${h},${f},15,0,0,0,dh`,t=`https://map.naver.com/v5/search/%EC%9D%B4%EB%B9%84%EC%9D%B8%ED%9B%84%EA%B3%BC?c=${h},${f},15,0,0,0,dh`;return(0,b.jsxs)(e,{children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:"약 추천 (증상 + 날씨 위험도)"}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-3 gap-2 text-sm mb-3",children:[(0,b.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:f,onChange:a=>g(a.target.value),placeholder:"위도(lat)"}),(0,b.jsx)("input",{className:"px-3 py-2 rounded-lg bg-white border w-full",value:h,onChange:a=>i(a.target.value),placeholder:"경도(lon)"}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)("select",{value:j,onChange:a=>k(Number(a.target.value)),className:"px-3 py-2 rounded-lg bg-zinc-100",children:[(0,b.jsx)("option",{value:0,children:"오늘"}),(0,b.jsx)("option",{value:1,children:"내일"})]}),(0,b.jsx)("button",{onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{g(String(a.coords.latitude)),i(String(a.coords.longitude))},()=>alert("위치 권한을 허용해주세요.")):alert("브라우저가 위치를 지원하지 않습니다.")},className:"px-3 py-2 rounded-lg bg-zinc-200",children:"내 위치"}),(0,b.jsx)("button",{onClick:p,className:"px-3 py-2 rounded-lg bg-zinc-900 text-white",children:"날씨 위험 불러오기"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-3 mb-3 text-sm",children:[(0,b.jsxs)("div",{className:"rounded-xl bg-zinc-50 border p-3",children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"최근 증상 기록"}),a?(0,b.jsxs)("div",{className:"mt-1 text-zinc-700",children:["시각: ",new Date(a.ts).toLocaleString(),(0,b.jsx)("br",{}),"재채기 ",a.sneeze," · 콧물 ",a.rhinorrhea," · 코막힘 ",a.congestion," · 눈가려움 ",a.itchyEyes]}):(0,b.jsx)("div",{className:"text-zinc-500",children:"없음 (로그 탭에서 추가)"})]}),(0,b.jsxs)("div",{className:"rounded-xl bg-zinc-50 border p-3",children:[(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:[0===j?"오늘":"내일"," 날씨 위험"]}),l?(0,b.jsxs)("div",{className:"mt-1 text-zinc-700",children:["레벨: ",(0,b.jsx)("b",{children:l.level})," · 점수 ",l.score,"/5"]}):(0,b.jsx)("div",{className:"text-zinc-500",children:"“날씨 위험 불러오기”를 눌러주세요"})]})]}),(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)("button",{onClick:function(){var b,c,d;let e,f,g,h,i,j,k,m,n;a?o((b=a,c=l?.score??null,d=l?.level,f=5/3*(((e=a=>"number"==typeof a?a:0)(b.rhinorrhea)+e(b.congestion)+e(b.sneeze))/3),g=5/3*((e(b.itchyEyes)+e(b.eyeRedness))/2),h=5/3*((e(b.cough)+e(b.postNasalDrip))/2),j=Number((.5*f+.2*g+.2*h+.1*(i=5/3*e(b.sleepQuality))).toFixed(2)),k=c??0,m=[],j>=3.5&&k>=3.5?m.push({title:"강력 조합: INCS + 항히스타민",detail:"- 코막힘/콧물/재채기 모두 강함 → INCS 매일 사용 + 2세대 항히스타민 병용 고려\n- 외출 시 마스크 · 귀가 후 샤워/코세척\n- 1~2주 지속/악화 시 진료 권고"}):j>=3&&k>=2.5&&m.push({title:"중등도 조합: INCS 중심",detail:"- 코막힘 비중↑ → INCS 우선, 재채기·콧물 동반 시 AH 추가\n- 취침 전 세척/가습 보조"}),j>=3&&k<2&&m.push({title:"증상은 높은데 날씨 위험 낮음",detail:"- 실내 트리거(집먼지/반려동물)·감염성 증상(발열/농성분비/얼굴통증) 점검\n- 세척 + 필요시 AH/INCS 단기 사용\n- 악화/지속 시 진료"}),j<1.5&&k>=3&&m.push({title:"예방: 위험 높은 날 대비",detail:"- 외출 전 마스크 · 귀가 후 세안/코세척\n- 이전에 계절성 악화 경험 있으면 AH PRN 또는 낮은 강도 INCS 고려"}),g>=2.5&&m.push({title:"눈 증상 대책",detail:"- 점안 항히스타민/복합제 + 인공눈물 세척\n- 콘택트렌즈 사용 시 위생 주의"}),h>=2.5&&m.push({title:"후비루/기침 관리",detail:"- 생리식염수 세척, 수분섭취, 취침 시 상체/베개 높이기\n- 지속 시 의료진 상담"}),i>=2.5&&m.push({title:"수면 방해 개선",detail:"- 야간 악화면 저녁 INCS 또는 졸림 적은 2세대 AH 고려"}),(f>=3||h>=2.5)&&m.push({title:"LTRA(류코트리엔 억제제) 고려",detail:"- 천식/천명/운동유발 증상 동반 시 의료진과 상의"}),(n=b?.triggers||{}).pollen&&m.push({title:"꽃가루 회피",detail:"- 외출 시 마스크/안경 · 귀가 후 샤워/세탁 · 환기 타이밍 조절"}),n.dust&&m.push({title:"집먼지/진드기",detail:"- 침구 커버 · 주 1회 60℃ 세탁 · 진공청소/물걸레"}),n.pet&&m.push({title:"반려동물",detail:"- 침실 출입 제한 · HEPA 공기청정기"}),n.coldAir&&m.push({title:"찬 공기",detail:"- 마스크/스카프 사용으로 비강 보온"}),m.push({title:"주의/경고",detail:"- 본 앱은 정보 제공용입니다(진단·치료 대체 아님)\n- 고열·농성분비·안면통 지속·후각소실/심한 천명은 즉시 진료 권고"}),1===m.length&&m.unshift({title:"증상 경미",detail:"- 생활요법(세척/환기/샤워) 우선 · 필요 시 AH PRN"}),m)):alert("먼저 '로그' 탭에서 증상 기록을 1개 이상 추가해 주세요.")},className:"px-4 py-2 rounded-xl bg-emerald-600 text-white",children:"추천 생성"})}),n.length>0?(0,b.jsx)("div",{className:"grid md:grid-cols-2 gap-3",children:n.map((a,c)=>(0,b.jsxs)("div",{className:"rounded-xl border p-3 text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:a.title}),(0,b.jsx)("div",{className:"text-[13px] text-zinc-700 mt-1 whitespace-pre-wrap",children:a.detail})]},c))}):(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"추천이 아직 없습니다. 상단에서 날씨 위험을 불러오고 “추천 생성”을 눌러주세요."}),(0,b.jsxs)("div",{className:"mt-4 grid sm:grid-cols-2 gap-2",children:[(0,b.jsx)("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-blue-600 text-white text-center",children:"근처 약국 (Google)"}),(0,b.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-green-600 text-white text-center",children:"근처 약국 (Naver)"}),(0,b.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-indigo-600 text-white text-center",children:"이비인후과 (Google)"}),(0,b.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-teal-600 text-white text-center",children:"이비인후과 (Naver)"})]}),(0,b.jsx)("div",{className:"text-xs text-zinc-500 mt-3",children:"* 본 정보는 일반적인 웰니스 가이드이며, 진단·치료를 대체하지 않습니다. 심한 증상·호흡곤란·안면통 지속·고열 등은 즉시 의료진과 상담하세요."})]})}function j(){return(0,b.jsxs)(e,{children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:"설정"}),(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"추가 옵션을 여기에 계속 붙이면 됩니다."})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map